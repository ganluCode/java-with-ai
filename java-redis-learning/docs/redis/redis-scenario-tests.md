# Redis 场景测试说明

## 概述

RedisScenarioTest 类提供了全面的 Redis 场景测试，涵盖了 Redis 的主要数据类型和常见使用场景。这些测试验证了 LettuceRedisClient 工具类的正确性和功能完整性。

## 测试场景

### 1. 用户会话管理 (testUserSessionManagement)
- **数据类型**: String
- **使用场景**: 存储用户会话信息
- **操作**: 设置带过期时间的会话数据、获取会话数据、检查会话存在性、删除会话

### 2. 用户信息存储 (testUserInfoStorage)
- **数据类型**: Hash
- **使用场景**: 存储用户详细信息
- **操作**: 设置哈希字段、获取单个字段值、获取所有字段、更新字段值、删除字段

### 3. 消息队列 (testMessageQueue)
- **数据类型**: List
- **使用场景**: 实现简单的消息队列
- **操作**: 向列表两端添加元素、从列表两端弹出元素、获取列表范围

### 4. 标签系统 (testTagSystem)
- **数据类型**: Set
- **使用场景**: 管理文章标签
- **操作**: 添加集合元素、获取所有元素、检查元素存在性、移除元素

### 5. 排行榜 (testLeaderboard)
- **数据类型**: Sorted Set
- **使用场景**: 实现文章排行榜
- **操作**: 添加带分数的元素、获取排名、获取分数、增加分数、获取排名范围

### 6. 计数器 (testCounter)
- **数据类型**: String (原子操作)
- **使用场景**: 实现页面浏览量和点赞数计数器
- **操作**: 原子递增、按指定值递增、获取当前计数值

### 7. 分布式锁 (testDistributedLock)
- **数据类型**: String
- **使用场景**: 实现简单的分布式锁
- **操作**: 设置带过期时间的锁、检查锁存在性、释放锁

### 8. 缓存 (testCache)
- **数据类型**: String
- **使用场景**: 实现带过期时间的缓存功能
- **操作**: 设置带过期时间的缓存、获取缓存数据、检查缓存存在性、验证过期机制

## 测试特点

1. **完整的生命周期管理**: 每个测试都包含 setUp 和 tearDown 方法，确保测试环境的干净和独立
2. **全面的数据类型覆盖**: 测试涵盖了 Redis 的所有主要数据类型
3. **实际场景模拟**: 每个测试都模拟了真实的业务场景
4. **自动清理**: 测试结束后自动清空测试数据，避免数据污染
5. **连接管理**: 正确管理 Redis 连接的创建和关闭

## 运行测试

要运行这些场景测试，请确保：

1. Redis 服务器正在运行
2. 配置文件正确设置
3. 网络连接正常

运行命令：
```bash
mvn test -pl java-redis-learning -Dtest=RedisScenarioTest
```

## 测试结果

所有测试都应该通过，验证了：
- LettuceRedisClient 工具类的正确实现
- Redis 各种数据类型操作的正确性
- 常见业务场景的可实现性
- 连接管理和资源清理的正确性